# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# ─── Colorscheme Nord ─────────────────────────────
set_from_resource $bg        i3wm.color0  #2E3440
set_from_resource $fg        i3wm.color7  #ECEFF4
set_from_resource $accent    i3wm.color4  #81A1C1
set_from_resource $urgent    i3wm.color1  #BF616A

client.focused          $accent $accent $fg $accent
client.focused_inactive #4C566A #3B4252 #D8DEE9 #4C566A
client.unfocused        #3B4252 #2E3440 #D8DEE9 #2E3440
client.urgent           $urgent $urgent $fg $urgent
client.placeholder      #000000 #0c0c0c #ffffff #000000

# Variables
# Mod key = Super
set $mod Mod4
set $terminal kitty
set $fileManager thunar
set $menu rofi -show drun
set $browser librewolf
set $browserWork brave

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:JetBrainsMono Nerd Font Mono 10

#font pango:DejaVu Sans Mono 8

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex-autostart --autostart --environment i3
# xss-lock grabs a logind suspend inhibit lock and will use i3lock to lock the
# screen before suspend. Use loginctl lock-session to lock your screen.
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
exec --no-startup-id nm-applet
exec --no-startup-id dunst
exec --no-startup-id dunst
exec --no-startup-id ~/dotfiles/scripts/focus_reminder.sh

set $refresh_i3status killall -SIGUSR1 i3status
# Keybinds

# Apps
bindsym $mod+Return exec $terminal 
bindsym $mod+e exec $fileManager
bindsym $mod+d exec $menu
bindsym $mod+b exec $browser
bindsym $mod+Shift+b exec $browserWork
bindsym $mod+Ctrl+Shift+L exec i3lock -c 000000
bindsym $mod+v exec sh -c 'cliphist list | rofi -dmenu | cliphist decode | wl-copy'
bindsym $mod+Shift+p exec wlogout

# Window management
bindsym $mod+q kill
bindsym $mod+Shift+m exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
bindsym $mod+space floating toggle
bindsym $mod+f fullscreen toggle

# Scripcts
bindsym $mod+Shift+z exec ~/dotfiles/scripts/zen-mode.sh
bindsym $mod+c exec ~/.config/i3/scripts/i3-center-window.sh
bindsym $mod+Shift+w exec nitrogen ~/Pictures/wallpapers/
exec_always --no-startup-id nitrogen --restore

# Screenshots (usar maim/flameshot en X11)
bindsym Print exec maim ~/Pictures/$(date +%s).png
bindsym $mod+Shift+Print exec maim -s ~/Pictures/$(date +%s).png
bindsym $mod+Ctrl+Print exec maim -s | wl-copy

# Focus con flechas y vim keys
bindsym $mod+Left focus left
bindsym $mod+Right focus right
bindsym $mod+Up focus up
bindsym $mod+Down focus down

bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Mover ventanas
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Resize ventanas
mode "resize" {
    bindsym h resize shrink width 20 px or 20 ppt
    bindsym l resize grow width 20 px or 20 ppt
    bindsym j resize shrink height 20 px or 20 ppt
    bindsym k resize grow height 20 px or 20 ppt
    bindsym Escape mode "default"
    bindsym Return mode "default"
}
bindsym $mod+Ctrl+h mode "resize"
bindsym $mod+Ctrl+l mode "resize"
bindsym $mod+Ctrl+j mode "resize"
bindsym $mod+Ctrl+k mode "resize"

# Workspaces
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# split v / split h
bindsym $mod+p split toggle

# Scratchpad
bindsym $mod+s move scratchpad
bindsym $mod+Shift+s scratchpad show

tiling_drag modifier titlebar

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+t layout stacking
bindsym $mod+g layout tabbed
bindsym $mod+Shift+y layout toggle split

# change focus between tiling / floating windows
bindsym $mod+Shift+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart

# Function keys
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
   status_command i3status-rs ~/.config/i3status-rust/config.toml
   position top
   colors {
        background #2E3440
        statusline #ECEFF4
        separator  #4C566A
        focused_workspace  #81A1C1 #81A1C1 #2E3440
        active_workspace   #4C566A #4C566A #ECEFF4
        inactive_workspace #3B4252 #3B4252 #D8DEE9
        urgent_workspace   #BF616A #BF616A #ECEFF4
   }
}
